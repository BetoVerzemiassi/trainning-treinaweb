<script type="text/javascript">	
/*
	Cria um validador para e-mail e telefone usando expressões regulares, e utilize as validações
	no método de adicionar novo contato da Lista de Contatos desenvolvida na Aula 3.

	Regras:
		- Cria um método para validar e-mail e telefone;
		- Use expressões regulares;
		- Não deixe um novo contato ser cadastrado se o e-mail e telefone forem inválidos.
*/

var agenda = {
	nome: 'Contatos Pessoais',
	contatos: [],
	adicionar: function(contato){
		var emailValido = /^(\w+[._-]?)+@\w+(\w+[.]?)+$/; //alberto.verzemiassi@email.com
		var telefoneValido = /^\d{5}-\d{4}$/; //99961-2305
		if(contato.nome && telefoneValido.test(contato.telefone) && emailValido.test(contato.email)){
			this.contatos.push(contato);
		}else{
			throw new Error('Erro ao adicionar o novo contato.');
		}
	},
	remover: function(nome){
		for(indice in this.contatos){
			var contato = this.contatos[indice];
			if(contato.nome === nome){
				this.contatos.splice(indice,1);
				return true;
			}
		}
		throw new Error('Erro ao remover usuario');
	},
	listar: function(){
		for(indice in this.contatos){
			var contato = this.contatos[indice];
			if(contato.pagina){
				console.log(contato.nome+' '+contato.telefone+' '+contato.email+' '+contato.pagina);
			}else{
				console.log(contato.nome+' '+contato.telefone+' '+contato.email);
			}
		}
	}
};

try{
	agenda.adicionar({
		nome: 'Alberto',
		telefone: '97458-3300',
		email: 'alberto@email.com',
		pagina: 'www.alberto.com.br'
	});

	agenda.adicionar({
		nome: 'Elaine',
		telefone: '99981-8686',
		email: 'elaine@email.com'	
	});
	
	agenda.remover('André');
}catch(e){
	alert(e.message);
}

agenda.listar();

</script>